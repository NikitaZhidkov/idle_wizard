* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Georgia', serif;
    background: linear-gradient(180deg, #1e1e2e 0%, #232336 50%, #1a1a28 100%);
    min-height: 100vh;
    color: #d4d4dc;
    overflow-x: hidden;
}
.game-container { max-width: 400px; margin: 0 auto; padding: 8px; }

/* Tabs */
.tabs { display: flex; gap: 4px; margin-bottom: 8px; }
.tab {
    flex: 1; padding: 6px; background: rgba(90, 80, 70, 0.25);
    border: 1px solid #5a5048; border-radius: 6px; color: #c8c4bc;
    font-size: 10px; cursor: pointer; font-family: Georgia, serif;
}
.tab.active { background: rgba(90, 80, 70, 0.5); border-color: #c9a857; }
.tab-content { display: none; }
.tab-content.active { display: block; }

/* Header */
.header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 8px; background: linear-gradient(135deg, rgba(70,65,58,0.4), rgba(55,50,45,0.4));
    border: 1px solid #4a4540; border-radius: 8px; margin-bottom: 8px;
}
.galleons { font-size: 16px; font-weight: bold; color: #c9a857; }
.gems { font-size: 12px; color: #a987c9; }
.level { font-size: 12px; color: #8a8a94; }

/* Battle Area */
.battle-area {
    border: 2px solid #3d3a35; border-radius: 12px;
    padding: 12px; margin-bottom: 8px;
    min-height: 160px; position: relative; overflow: hidden;
    transition: background 0.5s;
}
.room-background {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none; transition: all 0.5s;
}
.room-decor {
    position: absolute; pointer-events: none; font-size: 16px; opacity: 0.6;
}
.magic-particles {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
}
.ground {
    position: absolute; bottom: 0; left: 0; right: 0; height: 25px;
    transition: background 0.5s;
}

/* Room transition overlay */
.room-transition {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(20,20,28,0.92); display: flex;
    flex-direction: column; align-items: center; justify-content: center;
    z-index: 10; opacity: 0; pointer-events: none;
    transition: opacity 0.3s;
}
.room-transition.active { opacity: 1; pointer-events: auto; }
.room-victory { font-size: 24px; color: #c9a857; margin-bottom: 8px; }
.room-loot { font-size: 14px; color: #c8c4bc; margin-bottom: 12px; }
.room-next { font-size: 12px; color: #6a6a74; margin-bottom: 8px; }
.room-continue-btn {
    padding: 12px 30px; font-size: 14px;
    background: linear-gradient(135deg, #b8944a, #a07830);
    border: none; border-radius: 8px; color: #1e1e2e;
    font-weight: bold; cursor: pointer; font-family: Georgia, serif;
    transition: transform 0.1s;
}
.room-continue-btn:hover { transform: scale(1.05); }
.room-tip { font-size: 10px; color: #666; margin-top: 10px; font-style: italic; }

/* Buff selection panel (below game area) */
.buff-selection-panel {
    background: linear-gradient(135deg, rgba(35,30,45,0.95), rgba(45,40,55,0.95));
    border: 2px solid #7a6a50; border-radius: 12px;
    padding: 12px; margin-top: 10px;
}
.buff-title { font-size: 16px; color: #c9a857; margin-bottom: 10px; text-align: center; }
.buff-choices { display: flex; flex-direction: column; gap: 10px; }
.buff-choice {
    background: linear-gradient(135deg, rgba(55,50,65,0.6), rgba(45,40,55,0.6));
    border: 2px solid #4a4560; border-radius: 12px;
    padding: 12px; cursor: pointer; transition: all 0.2s;
    text-align: left;
}
.buff-choice:hover {
    border-color: #8a7a60;
    background: linear-gradient(135deg, rgba(65,60,80,0.7), rgba(55,50,70,0.7));
    transform: scale(1.02);
}
.buff-choice:active {
    transform: scale(0.98);
}
.buff-header { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }
.buff-icon { font-size: 28px; }
.buff-name { font-size: 15px; font-weight: bold; color: #c9a857; flex: 1; }
.buff-rarity { font-size: 10px; padding: 3px 8px; border-radius: 4px; font-weight: bold; }
.buff-rarity.common { background: #555; color: #ccc; }
.buff-rarity.rare { background: #4a6a9a; color: #d0e0f0; }
.buff-rarity.epic { background: #6a4a8a; color: #e0d0f0; }
.buff-rarity.legendary { background: linear-gradient(90deg, #a08040, #806030); color: #f0e8d0; }
.buff-desc { font-size: 12px; color: #b0b0b8; line-height: 1.4; margin-bottom: 4px; }
.buff-stats { font-size: 11px; color: #7aaaca; font-weight: bold; }

/* Active buffs display */
.active-buffs {
    display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 8px;
    max-height: 50px; overflow-y: auto;
}
.active-buff {
    background: rgba(55,50,65,0.5); border: 1px solid #4a4560;
    border-radius: 4px; padding: 2px 6px; font-size: 10px;
    display: flex; align-items: center; gap: 3px;
}
.active-buff-icon { font-size: 12px; }
.active-buff-count { color: #c9a857; font-weight: bold; }
.fighters {
    display: flex; justify-content: space-between; align-items: flex-end;
    height: 110px; padding: 0 10px; position: relative; z-index: 1;
}
.character { display: flex; flex-direction: column; align-items: center; }
.character-sprite { width: 55px; height: 75px; transition: transform 0.1s; }
.character-sprite.attacking { transform: translateX(15px); }
.enemy-sprite { width: 50px; height: 60px; transition: transform 0.1s, filter 0.1s; }
.enemy-sprite.hit { transform: translateX(8px); filter: brightness(2); }

/* Health bars */
.health-bar-container {
    width: 65px; height: 5px; background: #2a2a32;
    border-radius: 3px; margin-bottom: 3px; overflow: hidden;
}
.health-bar { height: 100%; transition: width 0.3s; }
.health-bar.player { background: linear-gradient(90deg, #a04050, #703040); }
.health-bar.enemy { background: linear-gradient(90deg, #408050, #306040); }
.character-name { font-size: 10px; margin-bottom: 2px; color: #c9a857; }

/* Magic type indicator */
.magic-badge {
    font-size: 14px; position: absolute; top: -5px; right: -5px;
}

/* Creature status */
.creature-status {
    position: absolute; top: 8px; right: 8px;
    display: flex; gap: 4px; flex-wrap: wrap; max-width: 100px;
}
.status-icon {
    width: 20px; height: 20px; border-radius: 4px;
    background: rgba(0,0,0,0.5); display: flex;
    align-items: center; justify-content: center; font-size: 12px;
}

/* House selector (stance) */
.house-selector {
    display: flex; gap: 6px; margin-bottom: 8px; justify-content: center;
}
.house {
    padding: 6px 10px; border-radius: 8px; cursor: pointer;
    background: rgba(0,0,0,0.3); border: 2px solid transparent;
    font-size: 10px; text-align: center; transition: all 0.2s;
}
.house.active { border-color: #ffd700; }
.house:hover { background: rgba(255,255,255,0.1); }
.house-icon { font-size: 16px; }
.house-name { font-size: 8px; }
.house[data-house="gryffindor"] { border-color: #740001; }
.house[data-house="gryffindor"].active { background: rgba(116,0,1,0.4); }
.house[data-house="slytherin"] { border-color: #1a472a; }
.house[data-house="slytherin"].active { background: rgba(26,71,42,0.4); }
.house[data-house="ravenclaw"] { border-color: #0e1a40; }
.house[data-house="ravenclaw"].active { background: rgba(14,26,64,0.4); }
.house[data-house="hufflepuff"] { border-color: #ecb939; }
.house[data-house="hufflepuff"].active { background: rgba(236,185,57,0.3); }

/* Spells */
.spells { display: flex; gap: 5px; justify-content: center; margin-bottom: 8px; flex-wrap: wrap; }
.spell {
    width: 42px; height: 42px; border-radius: 8px;
    background: rgba(50,45,60,0.4); border: 2px solid #4a4560;
    cursor: pointer; position: relative; display: flex;
    align-items: center; justify-content: center; font-size: 18px;
}
.spell.ready { border-color: #9a8a60; box-shadow: 0 0 8px rgba(180,160,100,0.4); }
.spell.on-cooldown { opacity: 0.5; }
.spell-cooldown { position: absolute; bottom: 1px; font-size: 9px; color: #d4d4dc; }
.spell-type {
    position: absolute; top: -4px; right: -4px; font-size: 9px;
    background: rgba(30,30,40,0.8); border-radius: 50%; padding: 2px;
}

/* Battle log */
.battle-log {
    background: rgba(25,25,32,0.5); border: 1px solid #3a3a42;
    border-radius: 6px; padding: 5px; margin-bottom: 8px;
    height: 45px; overflow-y: auto; font-size: 10px;
}
.log-entry { margin: 1px 0; opacity: 0.9; }
.log-damage { color: #c07070; }
.log-gold { color: #c9a857; }
.log-levelup { color: #9080a0; }
.log-crit { color: #d06060; font-weight: bold; }
.log-spell { color: #7aa8c0; }
.log-effective { color: #70b070; }
.log-resist { color: #c09050; }
.log-boss { color: #a080b0; font-weight: bold; }

/* Stats */
.stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-bottom: 8px; }
.stat { background: rgba(45,42,55,0.3); padding: 5px; border-radius: 6px; text-align: center; border: 1px solid #3a3848; }
.stat-value { font-size: 13px; font-weight: bold; color: #c9a857; }
.stat-label { font-size: 8px; color: #8a8a94; }

/* Skill Tree */
.skill-tree { padding: 10px; }
.tree-header { text-align: center; margin-bottom: 10px; }
.skill-points { font-size: 14px; color: #c9a857; }
.tree-paths { display: flex; gap: 6px; }
.tree-path {
    flex: 1; background: rgba(45,42,55,0.3);
    border: 1px solid #3a3848; border-radius: 10px; padding: 6px;
}
.path-header { text-align: center; margin-bottom: 6px; }
.path-icon { font-size: 20px; }
.path-name { font-size: 10px; font-weight: bold; }
.tree-skills { display: flex; flex-direction: column; gap: 5px; }
.tree-skill {
    background: rgba(30,30,38,0.4); border-radius: 6px;
    padding: 5px; cursor: pointer; border: 2px solid transparent;
    font-size: 9px;
}
.tree-skill.unlocked { border-color: #8a7a50; background: rgba(140,120,70,0.2); }
.tree-skill.available { border-color: #6090a0; }
.tree-skill.locked { opacity: 0.4; cursor: not-allowed; }
.tree-skill-header { display: flex; align-items: center; gap: 4px; }
.tree-skill-icon { font-size: 14px; }
.tree-skill-name { font-size: 9px; font-weight: bold; }
.tree-skill-cost { font-size: 8px; color: #c9a857; margin-left: auto; }
.tree-skill-desc { font-size: 8px; color: #7a7a84; margin-top: 2px; }

/* Shop */
.shop { background: rgba(60,55,48,0.25); border: 1px solid #4a4540; border-radius: 10px; padding: 8px; }
.shop-title { font-size: 12px; font-weight: bold; margin-bottom: 6px; text-align: center; color: #c9a857; }
.shop-items { display: grid; grid-template-columns: repeat(2, 1fr); gap: 5px; max-height: 180px; overflow-y: auto; }
.shop-item {
    background: rgba(30,30,38,0.4); border-radius: 6px;
    padding: 6px; text-align: center; cursor: pointer;
    border: 2px solid transparent; transition: all 0.2s;
}
.shop-item:hover { background: rgba(80,80,90,0.2); }
.shop-item.owned { border-color: #8a7a50; background: rgba(140,120,70,0.15); }
.shop-item.equipped { border-color: #6090a0; background: rgba(96,144,160,0.15); }
.shop-item.locked { opacity: 0.5; }
.item-icon { font-size: 20px; }
.item-name { font-size: 9px; }
.item-price { font-size: 10px; color: #c9a857; }
.item-stat { font-size: 8px; color: #7aa8c0; }
.item-magic { font-size: 8px; color: #a080b0; }

/* Bestiary */
.bestiary { max-height: 280px; overflow-y: auto; }
.creature-entry {
    background: rgba(30,30,38,0.4); border: 1px solid #3a3a42;
    border-radius: 8px; padding: 8px; margin-bottom: 6px;
    display: flex; align-items: center; gap: 10px;
}
.creature-entry.unknown { opacity: 0.4; }
.creature-icon { font-size: 28px; }
.creature-info { flex: 1; }
.creature-title { font-size: 11px; font-weight: bold; display: flex; align-items: center; gap: 5px; }
.creature-stats { font-size: 9px; color: #7a7a84; }
.creature-weakness { font-size: 9px; color: #70b070; }
.creature-ability { font-size: 9px; color: #a080b0; }

/* Battle Creature Card */
.battle-creature-card {
    background: linear-gradient(135deg, rgba(35,32,45,0.85), rgba(45,40,55,0.85));
    border: 2px solid #4a4560; border-radius: 12px;
    padding: 8px 10px;
    width: 120px; min-height: 100px;
    display: flex; flex-direction: column;
    position: relative;
}
.battle-creature-card.in-battle {
    box-shadow: 0 4px 15px rgba(0,0,0,0.4);
}
.battle-creature-card.boss {
    border-color: #c9a857;
    background: linear-gradient(135deg, rgba(55,45,35,0.9), rgba(65,50,40,0.9));
    box-shadow: 0 0 20px rgba(200,160,60,0.3);
}
.battle-card-top {
    display: flex; align-items: center; gap: 8px; margin-bottom: 6px;
}
.battle-creature-icon {
    font-size: 32px;
    filter: drop-shadow(0 0 10px rgba(200,200,255,0.4));
}
.battle-creature-card.boss .battle-creature-icon {
    filter: drop-shadow(0 0 12px rgba(255,200,100,0.5));
}
.battle-creature-info { flex: 1; }
.battle-creature-name {
    font-size: 11px; font-weight: bold; color: #d4d4dc;
    display: flex; align-items: center; gap: 4px;
    flex-wrap: wrap;
}
.battle-creature-name .boss-crown { color: #c9a857; font-size: 12px; }
.battle-creature-type {
    font-size: 14px;
}
.battle-creature-details {
    display: flex; gap: 6px; font-size: 9px;
    justify-content: space-between; margin-top: 4px;
}
.battle-creature-hp { color: #e07070; font-weight: bold; }
.battle-creature-atk { color: #c9a857; }
.battle-creature-weak { color: #70c070; }
.battle-creature-abilities {
    display: flex; gap: 2px; margin-top: 2px;
}
.battle-creature-ability {
    font-size: 12px; opacity: 0.9;
}
.battle-hp-bar {
    width: 100%; height: 6px; background: #1a1a22;
    border-radius: 3px; overflow: hidden;
    border: 1px solid #3a3a42;
}
.battle-hp-fill {
    height: 100%; background: linear-gradient(90deg, #509060, #407050);
    transition: width 0.3s;
}
.battle-hp-fill.low { background: linear-gradient(90deg, #c05050, #904040); }
.battle-hp-fill.boss { background: linear-gradient(90deg, #c9a857, #a08040); }

/* Floating text */
.floating-text {
    position: absolute; font-weight: bold; font-size: 14px; color: #c07070;
    animation: floatUp 0.8s ease-out forwards; pointer-events: none;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    font-family: Georgia, serif;
}
.floating-text.gold { color: #c9a857; }
.floating-text.crit { color: #d06060; font-size: 20px; }
.floating-text.heal { color: #70b070; }
.floating-text.spell { color: #7aa8c0; font-size: 18px; }
.floating-text.effective { color: #70b070; font-size: 18px; }
.floating-text.resist { color: #c09050; }
@keyframes floatUp {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-35px) scale(0.8); }
}

/* Effects */
.shake { animation: shake 0.15s ease-in-out; }
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-4px); }
    75% { transform: translateX(4px); }
}
.particle {
    position: absolute; pointer-events: none; border-radius: 50%;
    animation: particle 0.6s ease-out forwards;
}
@keyframes particle {
    0% { opacity: 1; transform: scale(1); }
    100% { opacity: 0; transform: scale(0) translateY(-25px); }
}
.spell-effect {
    position: absolute; width: 30px; height: 30px;
    border-radius: 50%; pointer-events: none;
    animation: spellBurst 0.5s ease-out forwards;
}
@keyframes spellBurst {
    0% { transform: scale(0); opacity: 1; }
    100% { transform: scale(3); opacity: 0; }
}
/* Spell visual effects */
.spell-visual {
    position: absolute; pointer-events: none; z-index: 100;
    font-size: 40px; text-shadow: 0 0 20px currentColor;
}
.spell-visual.bolt { animation: spellBolt 0.4s ease-out forwards; }
.spell-visual.fire { animation: spellFire 0.5s ease-out forwards; }
.spell-visual.ice { animation: spellIce 0.5s ease-out forwards; }
.spell-visual.slash { animation: spellSlash 0.3s ease-out forwards; }
.spell-visual.explode { animation: spellExplode 0.5s ease-out forwards; }
.spell-visual.heal { animation: spellHeal 0.6s ease-out forwards; color: #70b088; }
.spell-visual.shield { animation: spellShield 0.5s ease-out forwards; color: #7aa0c0; }
.spell-visual.death { animation: spellDeath 0.6s ease-out forwards; }
.spell-visual.patronus { animation: spellPatronus 0.8s ease-out forwards; font-size: 60px; }
.spell-visual.snake { animation: spellSnake 0.5s ease-out forwards; }
.spell-visual.plant { animation: spellPlant 0.5s ease-out forwards; }
.spell-visual.light { animation: spellLight 0.4s ease-out forwards; }
.spell-visual.spark { animation: spellSpark 0.4s ease-out forwards; }

@keyframes spellBolt {
    0% { transform: translateX(-100px) scale(0.5); opacity: 1; }
    100% { transform: translateX(0) scale(1.2); opacity: 0; }
}
@keyframes spellFire {
    0% { transform: scale(0.3) rotate(0deg); opacity: 1; }
    50% { transform: scale(1.5) rotate(180deg); opacity: 1; }
    100% { transform: scale(2) rotate(360deg); opacity: 0; }
}
@keyframes spellIce {
    0% { transform: scale(0) rotate(-45deg); opacity: 1; filter: blur(0); }
    100% { transform: scale(2) rotate(45deg); opacity: 0; filter: blur(3px); }
}
@keyframes spellSlash {
    0% { transform: translateX(-50px) rotate(-45deg) scaleX(0.3); opacity: 1; }
    100% { transform: translateX(20px) rotate(45deg) scaleX(1.5); opacity: 0; }
}
@keyframes spellExplode {
    0% { transform: scale(0); opacity: 1; }
    50% { transform: scale(2); opacity: 1; }
    100% { transform: scale(3); opacity: 0; filter: blur(5px); }
}
@keyframes spellHeal {
    0% { transform: translateY(20px) scale(0.5); opacity: 0; }
    50% { transform: translateY(-10px) scale(1.2); opacity: 1; }
    100% { transform: translateY(-30px) scale(0.8); opacity: 0; }
}
@keyframes spellShield {
    0% { transform: scale(0); opacity: 0; }
    30% { transform: scale(1.5); opacity: 1; }
    100% { transform: scale(2); opacity: 0; }
}
@keyframes spellDeath {
    0% { transform: scale(0) rotate(0deg); opacity: 1; filter: brightness(3); }
    50% { transform: scale(1.5) rotate(180deg); opacity: 1; filter: brightness(2); }
    100% { transform: scale(2) rotate(360deg); opacity: 0; filter: brightness(1); }
}
@keyframes spellPatronus {
    0% { transform: translateX(-80px) scale(0.3); opacity: 0; filter: brightness(2); }
    30% { transform: translateX(-40px) scale(1); opacity: 1; filter: brightness(3); }
    100% { transform: translateX(20px) scale(1.2); opacity: 0; filter: brightness(1); }
}
@keyframes spellSnake {
    0% { transform: translateX(-60px) scaleX(0.5); opacity: 1; }
    50% { transform: translateX(-20px) scaleX(1.2); opacity: 1; }
    100% { transform: translateX(10px) scaleX(0.8); opacity: 0; }
}
@keyframes spellPlant {
    0% { transform: translateY(30px) scale(0.3); opacity: 0; }
    50% { transform: translateY(0) scale(1.3); opacity: 1; }
    100% { transform: translateY(-20px) scale(1); opacity: 0; }
}
@keyframes spellLight {
    0% { transform: scale(0); opacity: 0; filter: brightness(1); }
    30% { transform: scale(2); opacity: 1; filter: brightness(5); }
    100% { transform: scale(3); opacity: 0; filter: brightness(1); }
}
@keyframes spellSpark {
    0% { transform: translateX(-80px) rotate(-30deg); opacity: 1; }
    100% { transform: translateX(0) rotate(30deg); opacity: 0; }
}

/* Battle info */
.battle-info { position: absolute; top: 8px; left: 8px; }
.floor-display { font-size: 11px; color: #9080a0; }
.combo-display { font-size: 12px; font-weight: bold; color: #c9a857; }

/* Spellbook */
.spellbook { padding: 8px; }
.spellbook-title { font-size: 14px; font-weight: bold; margin-bottom: 10px; text-align: center; color: #c9a857; }
.spellbook-list { display: flex; flex-direction: column; gap: 8px; max-height: 320px; overflow-y: auto; }
.spell-entry {
    background: rgba(40,38,50,0.5); border: 2px solid #3a3848;
    border-radius: 10px; padding: 10px; display: flex; align-items: center; gap: 12px;
    transition: all 0.2s;
}
.spell-entry.unlocked { border-color: #6a6a50; background: rgba(60,58,50,0.4); }
.spell-entry.locked { opacity: 0.5; }
.spell-entry-icon { font-size: 28px; width: 36px; text-align: center; }
.spell-entry-info { flex: 1; }
.spell-entry-name { font-size: 13px; font-weight: bold; color: #d4d4dc; display: flex; align-items: center; gap: 6px; }
.spell-entry-magic { font-size: 9px; padding: 2px 6px; border-radius: 4px; background: rgba(100,100,120,0.3); }
.spell-entry-desc { font-size: 10px; color: #9a9aa4; margin-top: 3px; line-height: 1.3; }
.spell-entry-cooldown { font-size: 10px; color: #7aa8c0; margin-top: 2px; }
.spell-entry-status { font-size: 10px; padding: 3px 8px; border-radius: 4px; font-weight: bold; }
.spell-entry-status.unlocked { background: rgba(100,140,80,0.3); color: #90c070; }
.spell-entry-status.locked { background: rgba(80,80,100,0.3); color: #8080a0; }

/* Offline popup */
.offline-popup, .house-select-popup, .gameover-popup {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(15,15,20,0.92); display: flex;
    align-items: center; justify-content: center; z-index: 100;
}
.offline-content, .house-select-content, .gameover-content {
    background: linear-gradient(135deg, #252530, #2d2d3a);
    border: 2px solid #6a6050; border-radius: 12px;
    padding: 20px; text-align: center; max-width: 320px;
}
.offline-title, .house-select-title, .gameover-title { font-size: 16px; margin-bottom: 12px; color: #c9a857; }
.offline-reward { font-size: 18px; margin: 6px 0; color: #c8c4bc; }
.offline-btn, .gameover-btn {
    margin-top: 12px; padding: 10px 25px; font-size: 13px;
    background: linear-gradient(135deg, #9a8a60, #7a6a40);
    border: none; border-radius: 6px; color: #1e1e2e;
    font-weight: bold; cursor: pointer; font-family: Georgia, serif;
}

/* House selection */
.house-select-title { font-size: 20px; margin-bottom: 8px; }
.house-select-subtitle { font-size: 12px; color: #7a7a84; margin-bottom: 16px; }
.house-options { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.house-option {
    padding: 12px 8px; border-radius: 10px; cursor: pointer;
    border: 3px solid transparent; transition: all 0.2s;
}
.house-option:hover { transform: scale(1.05); }
.house-option[data-house="gryffindor"] { background: linear-gradient(135deg, #5a2020, #803030); border-color: #a08040; }
.house-option[data-house="slytherin"] { background: linear-gradient(135deg, #1a3a2a, #2a4a3a); border-color: #8a8a8a; }
.house-option[data-house="ravenclaw"] { background: linear-gradient(135deg, #1a2a40, #2a3a50); border-color: #7a5a30; }
.house-option[data-house="hufflepuff"] { background: linear-gradient(135deg, #4a4035, #3a3028); border-color: #b09040; }
.house-option-icon { font-size: 32px; }
.house-option-name { font-size: 14px; font-weight: bold; margin: 6px 0; }
.house-option-bonus { font-size: 10px; color: #a0a0a8; }
.house-option-items { font-size: 9px; color: #c9a857; margin-top: 4px; }

/* Game over */
.gameover-content { max-width: 280px; }
.gameover-title { font-size: 24px; color: #b06060; }
.gameover-stats { margin: 16px 0; font-size: 12px; color: #a0a0a8; }
.gameover-stats div { margin: 4px 0; }
.gameover-floor { font-size: 18px; color: #c9a857; margin-bottom: 8px; }

/* Boss Shield Minigame */
.shield-minigame {
    display: none; margin-top: 10px; padding: 12px;
    background: linear-gradient(135deg, rgba(40,35,50,0.9), rgba(30,25,40,0.9));
    border: 2px solid #5a4a6a; border-radius: 12px;
}
.shield-minigame.active { display: block; }
.shield-title { text-align: center; font-size: 12px; color: #c9a857; margin-bottom: 8px; }
.shield-incoming {
    display: flex; align-items: center; justify-content: center;
    gap: 10px; margin-bottom: 12px; min-height: 70px;
    position: relative;
}
.shield-spell {
    font-size: 40px; text-shadow: 0 0 20px currentColor;
    position: relative; z-index: 2;
}
.shield-spell.flying {
    animation: spellFlyToPlayer 1.2s ease-in forwards;
}
.shield-spell.flying.tutorial {
    animation: spellFlyToPlayerSlow 3s ease-in forwards;
}
@keyframes spellFlyToPlayer {
    0% { transform: translateX(80px) translateY(-20px) scale(0.4); opacity: 0; }
    20% { opacity: 1; }
    100% { transform: translateX(-80px) translateY(10px) scale(1.3); opacity: 1; }
}
@keyframes spellFlyToPlayerSlow {
    0% { transform: translateX(80px) translateY(-20px) scale(0.4); opacity: 0; }
    15% { opacity: 1; }
    100% { transform: translateX(-80px) translateY(10px) scale(1.3); opacity: 1; }
}
.shield-player-icon {
    position: absolute; left: 20px; font-size: 30px; opacity: 0.8;
}
.shield-enemy-icon {
    position: absolute; right: 20px; font-size: 30px; opacity: 0.8;
}
.shield-buttons {
    display: flex; gap: 8px; justify-content: center;
}
.shield-btn {
    width: 60px; height: 60px; border-radius: 12px;
    border: 3px solid transparent; cursor: pointer;
    font-size: 24px; display: flex; align-items: center; justify-content: center;
    transition: all 0.15s; opacity: 0.8;
}
.shield-btn:hover { transform: scale(1.1); opacity: 1; }
.shield-btn:active { transform: scale(0.95); }
.shield-btn.red { background: linear-gradient(135deg, #8a3030, #a04040); border-color: #c05050; }
.shield-btn.blue { background: linear-gradient(135deg, #303080, #4040a0); border-color: #5050c0; }
.shield-btn.yellow { background: linear-gradient(135deg, #807830, #a09040); border-color: #c0b050; }
.shield-btn.green { background: linear-gradient(135deg, #308030, #40a040); border-color: #50c050; }
.shield-btn.highlight {
    animation: pulseHighlight 0.6s ease-in-out infinite;
    opacity: 1; transform: scale(1.15);
    box-shadow: 0 0 15px currentColor;
}
@keyframes pulseHighlight {
    0%, 100% { box-shadow: 0 0 15px currentColor, 0 0 25px currentColor; transform: scale(1.15); }
    50% { box-shadow: 0 0 25px currentColor, 0 0 45px currentColor; transform: scale(1.2); }
}
.shield-result {
    text-align: center; font-size: 14px; font-weight: bold;
    margin-top: 8px; min-height: 20px;
}
.shield-result.success { color: #70c070; }
.shield-result.fail { color: #c07070; }
.shield-timer {
    width: 100%; height: 8px; background: #2a2a3a;
    border-radius: 4px; margin-top: 8px; overflow: hidden;
}
.shield-timer-bar {
    height: 100%; background: linear-gradient(90deg, #c9a857, #a08030);
    transition: width 0.1s linear;
}
.shield-timer-bar.tutorial {
    background: linear-gradient(90deg, #70c070, #50a050);
}

/* Tutorial overlay */
.shield-tutorial-overlay {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(10, 10, 15, 0.95); z-index: 200;
    display: flex; align-items: center; justify-content: center;
}
.shield-tutorial-content {
    background: linear-gradient(135deg, #2a2535, #352f40);
    border: 3px solid #c9a857; border-radius: 16px;
    padding: 24px; max-width: 320px; text-align: center;
}
.shield-tutorial-title {
    font-size: 20px; color: #c9a857; margin-bottom: 16px;
}
.shield-tutorial-text {
    font-size: 13px; color: #d4d4dc; line-height: 1.5; margin-bottom: 16px;
}
.shield-tutorial-demo {
    display: flex; justify-content: center; gap: 12px; margin: 20px 0;
}
.shield-tutorial-demo-btn {
    width: 50px; height: 50px; border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 20px;
}
.shield-tutorial-arrow {
    font-size: 24px; color: #c9a857; margin: 16px 0;
    animation: bounceArrow 0.8s ease-in-out infinite;
}
@keyframes bounceArrow {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(8px); }
}
.shield-tutorial-btn {
    padding: 14px 32px; font-size: 15px;
    background: linear-gradient(135deg, #9a8a60, #7a6a40);
    border: none; border-radius: 8px; color: #1e1e2e;
    font-weight: bold; cursor: pointer; font-family: Georgia, serif;
    margin-top: 8px;
}
.shield-tutorial-btn:hover { transform: scale(1.05); }
.shield-hint {
    font-size: 11px; color: #a0a0a8; margin-top: 8px;
    font-style: italic;
}

/* Spell Tutorial (beginning of game) */
.spell-tutorial-overlay {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(10, 10, 15, 0.95); z-index: 200;
    display: flex; align-items: center; justify-content: center;
}
.spell-tutorial-content {
    background: linear-gradient(135deg, #2a2535, #352f40);
    border: 3px solid #c9a857; border-radius: 16px;
    padding: 24px; max-width: 340px; text-align: center;
}
.spell-tutorial-title {
    font-size: 22px; color: #c9a857; margin-bottom: 16px;
}
.spell-tutorial-text {
    font-size: 13px; color: #d4d4dc; line-height: 1.6; margin-bottom: 16px;
}
.spell-tutorial-step {
    background: rgba(50, 45, 60, 0.5); border: 1px solid #4a4560;
    border-radius: 12px; padding: 14px; margin: 12px 0;
    text-align: left;
}
.spell-tutorial-step-title {
    font-size: 14px; color: #c9a857; font-weight: bold;
    margin-bottom: 8px; display: flex; align-items: center; gap: 8px;
}
.spell-tutorial-step-text {
    font-size: 12px; color: #b0b0b8; line-height: 1.5;
}
.spell-tutorial-demo {
    display: flex; justify-content: center; gap: 8px; margin: 16px 0;
    flex-wrap: wrap;
}
.spell-tutorial-spell {
    width: 50px; height: 50px; border-radius: 10px;
    background: rgba(50, 45, 60, 0.6); border: 2px solid #6a6a50;
    display: flex; align-items: center; justify-content: center;
    font-size: 24px; position: relative;
}
.spell-tutorial-spell.highlight {
    border-color: #c9a857;
    box-shadow: 0 0 15px rgba(200, 170, 80, 0.5);
    animation: spellTutorialPulse 1s ease-in-out infinite;
}
@keyframes spellTutorialPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}
.spell-tutorial-label {
    font-size: 9px; color: #a0a0a8; margin-top: 4px;
}
.spell-tutorial-arrow {
    font-size: 20px; color: #c9a857; margin: 8px 0;
}
.spell-tutorial-btn {
    padding: 14px 40px; font-size: 16px;
    background: linear-gradient(135deg, #9a8a60, #7a6a40);
    border: none; border-radius: 8px; color: #1e1e2e;
    font-weight: bold; cursor: pointer; font-family: Georgia, serif;
    margin-top: 12px; transition: transform 0.1s;
}
.spell-tutorial-btn:hover { transform: scale(1.05); }
.spell-tutorial-btn:active { transform: scale(0.98); }
.spell-tutorial-page {
    display: none;
}
.spell-tutorial-page.active {
    display: block;
}
.spell-tutorial-dots {
    display: flex; justify-content: center; gap: 8px; margin-top: 16px;
}
.spell-tutorial-dot {
    width: 10px; height: 10px; border-radius: 50%;
    background: #4a4560;
}
.spell-tutorial-dot.active {
    background: #c9a857;
}
